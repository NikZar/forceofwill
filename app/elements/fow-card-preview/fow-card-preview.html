<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../elements/fow-open-sans/fow-open-sans.html">
<link rel="import" href="../../elements/fow-rest-service/fow-rest-service.html">

<polymer-element name="fow-card-preview" attributes="card toast token">
  <template>
    <style type="text/css">

      :host {
        font-family: Open Sans;
        display: block;
        background-color: rgba(255,255,255,0.9);
        margin: 10px;
        padding: 10px;
        border-radius: 5px;
        color: #222;
        min-height: 142px;
      }
      #cardImg{
        width: 100px; 
        margin-top: 1px;
        margin-right: 10px;
      }
      .preview{
       margin-left: 10px;
      }
      .title{
        font-size: 1.5em;
      }
      #description{
        font-size: 0.7em;
      }

      core-icon:hover{
        color: #5a5;
        cursor: pointer;
      }
      
    </style>

    <fow-rest-service id="addCard" 
      toast="{{toast}}"
      auto="false" 
      type="binders" 
      method="POST" 
      token="{{token}}">
    </fow-rest-service>

    <div>
      <img id="cardImg" align="left" />
      <div class="preview">
        <div class="title">{{card.Name}}</div>
        <div id="description"></div>
        <div>{{card.Type}}</div>
        <template if="{{ (card.Type !== 'Spell') && (card.Type !== 'Chant') && (card.Type !== 'Addition')  && (card.Type !== 'Ruler') }}">
          <div>{{card.ATK}}/{{card.DEF}}</div>
        </template>
        <core-icon class="cardIcon" icon="add-box" on-tap="{{addCard}}"></core-icon>
      </div>
    </div>
  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
        // define element prototype here
        cardChanged: function(){
          //console.log("Card: ", this.card);
          if(this.card){
            this.$.cardImg.src = "../images"+this.card["Image path"];
            this.$.description.innerHTML = this.card.Cardtext;
          }
        },

        addCard: function(){
          this.$.addCard.body = JSON.stringify(this.card);
          this.$.addCard.go();
        }        

      });

    })();
  </script>
</polymer-element>
