<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-localstorage/core-localstorage.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">

<link rel="import" href="../../elements/fow-paypal-donate/fow-paypal-donate.html">
<link rel="import" href="../../elements/fow-open-sans/fow-open-sans.html">

<polymer-element layout vertical center center-justified name="fow-settings" attributes="token">
  <template>
    <style>
      :host {
        display: block;
        font-family: Open Sans;
        font-size: 1.3em;
        text-align: center;
      }
      
      .fab{
        background-color: #9C9;
      }

      .settings-label{
        font-size: 0.8em;
      }

    </style>

    <core-localstorage id="LSlocale" 
      name="locale" 
      value="{{locale}}">
    </core-localstorage>


    
    <br />
    <br />
    
    <div class="settings-label">  {{"language" | translate}}:</div>
    <paper-radio-group selected="{{newLocale}}">
      <paper-radio-button name="en-US" label="English">
      </paper-radio-button>
      <paper-radio-button name="it-IT" label="Italiano">
      </paper-radio-button>
    </paper-radio-group>
    
    <paper-fab class="fab" icon="arrow-forward" on-tap="{{applyChanges}}"></paper-fab>

    
    <br />
    <br />

    
    <br />
    <br />

    <div class="row" layout horizonal center start>
      
      <div>
        Please support us, make a small donation:
      </div>
      <br />
      <fow-paypal-donate>
      </fow-paypal-donate>

    </div>

  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
        ready: function(){

          if(localStorage["locale"]){
            this.newLocale = JSON.parse(localStorage["locale"]);
          }

        },

        applyChanges: function(){


          this.$.LSlocale.value = this.newLocale;

          console.log(this.newLocale);

          window.setTimeout(function(){
            location.reload();
          }, 500);
          
        }
      });

    })();
  </script>
</polymer-element>
