<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/facebook-login/facebook-login.html">

<polymer-element name="fow-login" attributes="toast user">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <facebook-login 
      on-facebook-signin-success="{{loginSuccess}}"  
      on-graph-api-response="{{parseResponse}}"
      on-facebook-signin-not-authorized="{{loginFail}}"
      appID="568442163257885">
    </facebook-login>

  </template>
  <script>
    (function () {
      'use strict';

      Polymer("fow-login",{
        // define element prototype here
        loginSuccess: function(event){
        
          var response = event.detail.response;
          console.log("Response:", response);
          if(this.toast){
            this.toast.text="Login successful";
            this.toast.show();
          }

          this.user = response.authResponse.userID;
        
        },

        loginFail: function(event){
          console.log("Error:", event);
          if(this.toast){
            this.toast.text="There was a login problem.";
            this.toast.show();
          }
        }

      });

    })();
  </script>
</polymer-element>
