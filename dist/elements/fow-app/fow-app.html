<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/flatiron-director/flatiron-director.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/slide-up.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/slide-down.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/list-cascade.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/tile-cascade.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/cross-fade.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/hero-transition.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/hero-transition.css">

<link rel="import" href="../../elements/fow-open-sans/fow-open-sans.html">
<link rel="import" href="../../elements/fow-card-list/fow-card-list.html">
<link rel="import" href="../../elements/fow-login/fow-login.html">
<link rel="import" href="../../elements/fow-notification-icon/fow-notification-icon.html">
<link rel="import" href="../../elements/fow-menu/fow-menu.html">

<polymer-element name="fow-app" attributes="toast">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
        font-family: Open Sans;
      }

      .loginButton{
        position: absolute;
        top: 26px;
        left: 10px;
        z-index: 99;
      }

      .header{
        margin-top: 60px;
        width: 320px;
      }

      .splashtext{
        position: absolute;
        top: 26px;
        left: 80px;
        font-size: 1.0em;
        font-weight: lighter;
        text-align: center;
      }

      .roundedImage{
        position: absolute;
        top: 10px;
        left: 90px;
        border-radius: 50%;
        border: 1px solid #fff;
      }

      #avatar{
        position: absolute;
        top: 22px;
        left: 146px;
        font-size: 1.2em;
      }

      #notificationIcon{
        position: absolute;
        top: 6px;
        right: 6px;
      }

      core-animated-pages{
        width: 100%;
        position: relative;
      }

      section{
        position: relative;
        margin-left: 8%;
      }

    </style>

    <template if="{{user}}">
      <fow-notification-icon id="notificationIcon" notificationCount="{{notificationCount}}">
      </fow-notification-icon>
    </template>

    <paper-toast 
      id="toast" 
      text="There was a problem loading data.">
    </paper-toast>
    
    <div layout vertical center>

      <fow-login user="{{user}}" userPhoto="{{userPhoto}}"
        class="loginButton"
        toast="{{$.toast}}"
        token="{{token}}">
      </fow-login>

      <template if="{{!user}}">
        <div class="splashtext">
          << Please log in with facebook
        </div>
      </template>

      <template if="{{user}}">
        <div id="avatar">
          <div layout horizontal>
            <div> {{user.first_name}} {{user.last_name}} </div>
          </div>
        </div>
      </template>

      <img 
        class="header" 
        src="../../images/fow.svg">
      </img>

      <template if="{{userPhoto}}">
        
        <img class="roundedImage"
        src="{{userPhoto.url}}">
        </img>
        
      </template>

      <template if="{{user}}">
        <flatiron-director route="{{selected}}" autoHash on-director-route="{{routeChanged}}">
        </flatiron-director>

        <fow-menu selected="{{selected}}" smallQuery="max-width: 1000px"></fow-menu>

        <core-animated-pages selected="{{selected}}" transitions="slide-up slide-down list-cascade hero-transition cross-fade">
          
          <section name="cards">
            <fow-card-list token="{{token}}"></fow-card-list>
          </section>

        <core-animated-pages>
        
      </template>

    </div>


  </template>
  <script>
    (function () {
      'use strict';

      Polymer("fow-app",{
        // define element prototype here
      });

    })();
  </script>
</polymer-element>
